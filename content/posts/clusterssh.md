---
title: clusterssh
date: 2014-09-03
categories:
  - Linux
---

–í—Å—Ç–∞–ª–∞ –∑–∞–¥–∞—á–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç.–¥.
  
–ó–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π –∏ –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç ‚Äì –Ω–µ –≤–∞—Ä–∏–∞–Ω—Ç, –ø–æ—ç—Ç–æ–º—É –±—ã–ª –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –ø–æ–∏—Å–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —É—Ç–∏–ª–∏—Ç—ã.

[clusterssh](http://sourceforge.net/projects/clusterssh/)

–í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ, –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º –ø–æ ssh(–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã) —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
cssh username1@188.226.179.180 username2@188.226.179.181 username3@188.226.179.182
```

–ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ç—ã—Ä–µ –æ–∫–Ω–∞: 3 –æ–∫–Ω–∞ xterm, –∏ –æ–∫–Ω–æ cssh.

–ú–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∫–∞–∫ –≤–æ –≤—Å–µ –æ–∫–Ω–∞ xterm –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äì –≤–≤–æ–¥—è –≤ –æ–∫–Ω–æ cssh, —Ç–∞–∫ –∏ –∫–∞–∂–¥–æ–µ –æ–∫–Ω–æ xterm –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –ø–∞—Ä–æ–ª–∏ –æ—Ç sudo —Ä–∞–∑–Ω—ã–µ –Ω–∞ –∫–∞–∂–¥–æ–º —Ö–æ—Å—Ç–µ.

–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –µ—ë –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç, –¥–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ clusterssh.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è tag'–æ–≤ (tag –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–æ–≤), –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:

```bash
~/.clusterssh/clusters
```

–í –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å tag –ª–∏–±–æ –Ω–∞–±–æ—Ä tag'–æ–≤:

```bash
# My favorite servers
fav username1@188.226.179.180 username2@188.226.179.181 username3@188.226.179.182
```

–ò –≤ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º tag:

```bash
cssh fav
```

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ tag'–æ–≤ –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∫–æ –≤—Å–µ–º, —Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –∏—Ö:

```bash
cssh tag1 tag2 tag3
```

–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äì –∑–∞–ø—É—Å–∫ —Å–µ—Å—Å–∏–π ssh –≤ —Ü–∏–∫–ª–µ, –≤ –¥–æ—á–µ—Ä–Ω–µ–º –ø—Ä–æ—Ü–µ—Å—Å–µ:

```bash
#!/bin/bash

servers=$1
commands=$2

for server in $servers; do
  echo "ssh $server $commands"
  gnome-terminal -e "ssh $server $commands" &
done
```

–ù–∞–∑–æ–≤–µ–º –¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç clustershell.sh

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ:

```bash
./clustershell.sh "username1@188.226.179.180 username2@188.226.179.181 username3@188.226.179.182" ./script-to-run-on-servers.sh
```

–ò—Ç–æ–≥–æ:

* –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cssh
* –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–∫—Ä–∏–ø—Ç üôÇ
